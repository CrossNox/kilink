CodeMirror.defineMode("stex",function(){"use strict";function a(a,b){a.cmdState.push(b)}function b(a){return a.cmdState.length>0?a.cmdState[a.cmdState.length-1]:null}function c(a){var b=a.cmdState.pop();b&&b.closeBracket()}function d(a){for(var b=a.cmdState,c=b.length-1;c>=0;c--){var d=b[c];if("DEFAULT"!=d.name)return d}return{styleIdentifier:function(){return null}}}function e(a,b,c){return function(){this.name=a,this.bracketNo=0,this.style=b,this.styles=c,this.argument=null,this.styleIdentifier=function(){return this.styles[this.bracketNo-1]||null},this.openBracket=function(){return this.bracketNo++,"bracket"},this.closeBracket=function(){}}}function g(a,b){a.f=b}function h(c,e){var h;if(c.match(/^\\[a-zA-Z@]+/)){var l=c.current().slice(1);return h=f[l]||f.DEFAULT,h=new h,a(e,h),g(e,k),h.style}if(c.match(/^\\[$&%#{}_]/))return"tag";if(c.match(/^\\[,;!\/\\]/))return"tag";if(c.match("\\["))return g(e,function(a,b){return j(a,b,"\\]")}),"keyword";if(c.match("$$"))return g(e,function(a,b){return j(a,b,"$$")}),"keyword";if(c.match("$"))return g(e,function(a,b){return j(a,b,"$")}),"keyword";var m=c.next();return"%"==m?(c.eol()||g(e,i),"comment"):"}"==m||"]"==m?(h=b(e))?(h.closeBracket(m),g(e,k),"bracket"):"error":"{"==m||"["==m?(h=f.DEFAULT,h=new h,a(e,h),"bracket"):/\d/.test(m)?(c.eatWhile(/[\w.%]/),"atom"):(c.eatWhile(/[\w\-_]/),h=d(e),"begin"==h.name&&(h.argument=c.current()),h.styleIdentifier())}function i(a,b){return a.skipToEnd(),g(b,h),"comment"}function j(a,b,c){if(a.eatSpace())return null;if(a.match(c))return g(b,h),"keyword";if(a.match(/^\\[a-zA-Z@]+/))return"tag";if(a.match(/^[a-zA-Z]+/))return"variable-2";if(a.match(/^\\[$&%#{}_]/))return"tag";if(a.match(/^\\[,;!\/]/))return"tag";if(a.match(/^[\^_&]/))return"tag";if(a.match(/^[+\-<>|=,\/@!*:;'"`~#?]/))return null;if(a.match(/^(\d+\.\d*|\d*\.\d+|\d+)/))return"number";var d=a.next();return"{"==d||"}"==d||"["==d||"]"==d||"("==d||")"==d?"bracket":"%"==d?(a.eol()||a.skipToEnd(),"comment"):"error"}function k(a,d){var f,e=a.peek();return"{"==e||"["==e?(f=b(d),f.openBracket(e),a.eat(e),g(d,h),"bracket"):/[ \t\r]/.test(e)?(a.eat(e),null):(g(d,h),c(d),h(a,d))}var f={};return f.importmodule=e("importmodule","tag",["string","builtin"]),f.documentclass=e("documentclass","tag",["","atom"]),f.usepackage=e("usepackage","tag",["atom"]),f.begin=e("begin","tag",["atom"]),f.end=e("end","tag",["atom"]),f.DEFAULT=function(){this.name="DEFAULT",this.style="tag",this.styleIdentifier=this.openBracket=this.closeBracket=function(){}},{startState:function(){return{cmdState:[],f:h}},copyState:function(a){return{cmdState:a.cmdState.slice(),f:a.f}},token:function(a,b){return b.f(a,b)}}}),CodeMirror.defineMIME("text/x-stex","stex"),CodeMirror.defineMIME("text/x-latex","stex");